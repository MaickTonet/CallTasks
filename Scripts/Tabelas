CREATE TABLE Chamado (
  codcha        SERIAL NOT NULL, 
  empresacnpemp varchar(14) NOT NULL, 
  usuariocodusu varchar(11) NOT NULL, 
  titcha        varchar(20) NOT NULL, 
  descha        text, 
  databecha     timestamp NOT NULL, 
  datenccha     timestamp NOT NULL, 
  stcha         char(1) NOT NULL, 
  gracha        varchar(10) NOT NULL, 
  tipcha        varchar(10) NOT NULL, 
  PRIMARY KEY (codcha));
COMMENT ON TABLE Chamado IS 'Cadastro do chamado';
COMMENT ON COLUMN Chamado.codcha IS 'Codigo do chamado';
COMMENT ON COLUMN Chamado.empresacnpemp IS 'Chave estrangeira da empresa';
COMMENT ON COLUMN Chamado.usuariocodusu IS 'Chave estrangeira do usuário';
COMMENT ON COLUMN Chamado.titcha IS 'Titulo do chamado';
COMMENT ON COLUMN Chamado.descha IS 'Descrição do chamado';
COMMENT ON COLUMN Chamado.databecha IS 'Data de abetura do chamado';
COMMENT ON COLUMN Chamado.datenccha IS 'Data de encerramento do chamado';
COMMENT ON COLUMN Chamado.stcha IS 'Status do chamado';
COMMENT ON COLUMN Chamado.gracha IS 'Grau de urgência do chamado';
COMMENT ON COLUMN Chamado.tipcha IS 'Tipo do chamado';
CREATE TABLE Comentario (
  Chamadocodcha int4 NOT NULL, 
  codcom        SERIAL NOT NULL, 
  nomcom        varchar(40) NOT NULL, 
  tipcom        varchar(20) NOT NULL, 
  PRIMARY KEY (codcom));
COMMENT ON TABLE Comentario IS 'Comentários dos chamados abertos';
COMMENT ON COLUMN Comentario.Chamadocodcha IS 'Chave estrangeira do chamado';
COMMENT ON COLUMN Comentario.codcom IS 'Codigo do comentario';
COMMENT ON COLUMN Comentario.nomcom IS 'Autor do comentário';
COMMENT ON COLUMN Comentario.tipcom IS 'Tipo do chamado';
CREATE TABLE empresa (
  cnpemp varchar(14) NOT NULL, 
  nomemp varchar(40) NOT NULL, 
  emaemp varchar(40) NOT NULL, 
  telemp varchar(20) NOT NULL, 
  PRIMARY KEY (cnpemp));
COMMENT ON TABLE empresa IS 'Catalogo  da empresa';
COMMENT ON COLUMN empresa.cnpemp IS 'CNPJ da empresa';
COMMENT ON COLUMN empresa.nomemp IS 'Nome da empresa';
COMMENT ON COLUMN empresa.emaemp IS 'E-mail da empresa';
COMMENT ON COLUMN empresa.telemp IS 'Telefone de contato da empresa';
CREATE TABLE endereço (
  empresacnpemp varchar(14) NOT NULL, 
  cepend        varchar(11) NOT NULL, 
  ruaend        varchar(40) NOT NULL, 
  baiend        varchar(20) NOT NULL, 
  cidend        varchar(20) NOT NULL);
COMMENT ON TABLE endereço IS 'Endereço da empresa';
COMMENT ON COLUMN endereço.empresacnpemp IS 'Chave estrangeira da empresa';
COMMENT ON COLUMN endereço.cepend IS 'CEP da empresa';
COMMENT ON COLUMN endereço.ruaend IS 'Rua da empresa';
COMMENT ON COLUMN endereço.baiend IS 'Bairo da empresa';
COMMENT ON COLUMN endereço.cidend IS 'Cidade da empresa';
CREATE TABLE usuario (
  usuariocpfusu varchar(11) NOT NULL, 
  cpfusu        varchar(11) NOT NULL, 
  nomusu        varchar(40) NOT NULL, 
  emausu        varchar(40) NOT NULL UNIQUE, 
  depusu        varchar(20) NOT NULL, 
  telusu        varchar(20), 
  carusu        varchar(20), 
  PRIMARY KEY (cpfusu));
COMMENT ON TABLE usuario IS 'Cadastro de usuário';
COMMENT ON COLUMN usuario.cpfusu IS 'CPF do usuário';
COMMENT ON COLUMN usuario.nomusu IS 'Nome do usuário';
COMMENT ON COLUMN usuario.emausu IS 'E-mail do usuário';
COMMENT ON COLUMN usuario.depusu IS 'Departamento do usuario';
COMMENT ON COLUMN usuario.telusu IS 'Telefone do usuário';
COMMENT ON COLUMN usuario.carusu IS 'Cargo do usuário';
ALTER TABLE endereço ADD CONSTRAINT FKendereço862034 FOREIGN KEY (empresacnpemp) REFERENCES empresa (cnpemp);
ALTER TABLE Chamado ADD CONSTRAINT FKChamado334142 FOREIGN KEY (usuariocodusu) REFERENCES usuario (cpfusu);
ALTER TABLE Comentario ADD CONSTRAINT FKComentario995156 FOREIGN KEY (Chamadocodcha) REFERENCES Chamado (codcha);
ALTER TABLE Chamado ADD CONSTRAINT FKChamado666979 FOREIGN KEY (empresacnpemp) REFERENCES empresa (cnpemp);
ALTER TABLE usuario ADD CONSTRAINT FKusuario788108 FOREIGN KEY (usuariocpfusu) REFERENCES usuario (cpfusu);
